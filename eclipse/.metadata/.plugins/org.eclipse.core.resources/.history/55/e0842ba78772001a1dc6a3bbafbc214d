package mystra.mods;

import org.lwjgl.input.Keyboard;

import mystra.main.Category;

public class Scaffold extends Module{

	public Scaffold() {
		super("Scaffold", Keyboard.KEY_C, Category.MOVEMENT);	
		}
	
	@Override
	public void onUpdate()
	{
		BlockPos belowPlayer = new BlockPos(WMinecraft.getPlayer()).down();
		
		// check if block is already placed
		if(!WBlock.getMaterial(belowPlayer).isReplaceable())
			return;
		
		// search blocks in hotbar
		int newSlot = -1;
		for(int i = 0; i < 9; i++)
		{
			// filter out non-block items
			ItemStack stack =
				WMinecraft.getPlayer().inventory.getStackInSlot(i);
			if(WItem.isNullOrEmpty(stack)
				|| !(stack.getItem() instanceof ItemBlock))
				continue;
			
			// filter out non-solid blocks
			if(!Block.getBlockFromItem(stack.getItem()).getDefaultState()
				.isFullBlock())
				continue;
			
			newSlot = i;
			break;
		}
		
		// check if any blocks were found
		if(newSlot == -1)
			return;
		
		// set slot
		int oldSlot = WMinecraft.getPlayer().inventory.currentItem;
		WMinecraft.getPlayer().inventory.currentItem = newSlot;
		
		// place block
		BlockUtils.placeBlockScaffold(belowPlayer);
		
		// reset slot
		WMinecraft.getPlayer().inventory.currentItem = oldSlot;
	}
}

}
